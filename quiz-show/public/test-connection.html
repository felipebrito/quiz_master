<!DOCTYPE html>
<html>
<head>
    <title>Teste de Conex√£o Socket.IO</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
    <h1>Teste de Conex√£o Socket.IO</h1>
    <div id="status">Testando...</div>
    <div id="logs"></div>

    <script>
        function addLog(message) {
            const logs = document.getElementById('logs');
            const div = document.createElement('div');
            div.textContent = new Date().toLocaleTimeString() + ': ' + message;
            logs.appendChild(div);
        }

        // Testar conex√£o principal
        const socket = io('http://localhost:3001');
        
        socket.on('connect', () => {
            document.getElementById('status').innerHTML = '‚úÖ Socket.IO Principal: Conectado';
            document.getElementById('status').style.color = 'green';
            addLog('Conectado ao namespace principal');
            
            // Testar ping
            socket.emit('ping');
            addLog('Enviado ping para servidor');
        });

        socket.on('disconnect', (reason) => {
            document.getElementById('status').innerHTML = '‚ùå Socket.IO Principal: Desconectado - ' + reason;
            document.getElementById('status').style.color = 'red';
            addLog('Desconectado: ' + reason);
        });

        socket.on('pong', (data) => {
            addLog('Recebido pong: ' + JSON.stringify(data));
        });

        // Testar namespace admin
        const adminSocket = io('http://localhost:3001/admin');
        
        adminSocket.on('connect', () => {
            addLog('‚úÖ Admin namespace: Conectado');
            
            // Testar ping admin
            adminSocket.emit('admin:ping');
            addLog('Enviado admin:ping');
        });

        adminSocket.on('disconnect', (reason) => {
            addLog('‚ùå Admin namespace: Desconectado - ' + reason);
        });

        adminSocket.on('admin:pong', (data) => {
            addLog('Recebido admin:pong: ' + JSON.stringify(data));
        });

        // Testar eventos de jogo
        socket.on('game:started', (data) => {
            addLog('üéÆ Jogo iniciado: ' + JSON.stringify(data));
        });

        socket.on('round:started', (data) => {
            addLog('üéØ Rodada iniciada: ' + JSON.stringify(data));
        });

        socket.on('timer:update', (data) => {
            addLog('‚è∞ Timer: ' + JSON.stringify(data));
        });
    </script>
</body>
</html>
